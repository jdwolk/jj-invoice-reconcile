<div class="page-header">
  <h1>Orders</h1>
</div>

<div class="row">
  <%= search_form_for [:admin, @q], html: { class: 'form' } do |f| %>
    <fieldset>
      <div class="form-group col-md-4">
        <%= f.label :client_id, 'Client Name' %>
        <%= f.select :client_id, options_from_collection_for_select(@clients, 'id', 'name'), {}, class: 'form-control js-example-basic-single' %>
      </div>

      <div class="form-group col-md-3">
        <%= f.label :complete_date_gteq, 'From' %>
        <%= f.search_field :complete_date_gteq, class: 'form-control', data: { provide: 'datepicker' } %>
      </div>

      <div class="form-group col-md-3">
        <%= f.label :complete_date_gteq, 'To' %>
        <%= f.search_field :complete_date_lteq, class: 'form-control', data: { provide: 'datepicker' } %>
      </div>

      <div class="col-md-2">
        <%= f.submit 'Search', class: 'btn btn-default' %>
      </div>
    </fieldset>
  <% end %>
</div>

<div class="row">
  <table class="table table-hover">
    <thead>
      <th>J&J #</th>
      <th>Client</th>
      <th>Reference #</th>
      <th>Name</th>
      <th>Service</th>
      <th>Amount</th>
      <th>Order Date</th>
      <th>Complete Date</th>
    </thead>
    <tbody>
      <% @orders.each do |order| %>
        <tr>
          <td><%= order.id %></td>
          <td><%= order.client.try(:name) %></td>
          <td><%= order.external_reference_num %></td>
          <td><%= order.prop_name %></td>
          <td><%= order.service %></td>
          <td><%= humanized_money_with_symbol order.service_fee %></td>
          <td><%= formatted_date order.order_date %></td>
          <td><%= formatted_date order.complete_date %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
